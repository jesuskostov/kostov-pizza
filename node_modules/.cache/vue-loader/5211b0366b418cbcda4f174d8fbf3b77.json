{"remainingRequest":"/home/jesuskostov/Desktop/project/kostov-pizza/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/jesuskostov/Desktop/project/kostov-pizza/src/views/MakeOrder.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/jesuskostov/Desktop/project/kostov-pizza/src/views/MakeOrder.vue","mtime":1614248068967},{"path":"/home/jesuskostov/Desktop/project/kostov-pizza/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jesuskostov/Desktop/project/kostov-pizza/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/jesuskostov/Desktop/project/kostov-pizza/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jesuskostov/Desktop/project/kostov-pizza/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBDYXJ0IGZyb20gJy4uL2NvbXBvbmVudHMvQ2FydCcKaW1wb3J0IHsgZmIgfSBmcm9tICcuLi9maXJlYmFzZScKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJwoKZXhwb3J0IGRlZmF1bHQgewogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICB1c2VyVWlkOiAnJywKICAgICAgICAgICAgbmFtZTogJycsCiAgICAgICAgICAgIGFkZHJlc3M6ICcnLAogICAgICAgICAgICBwaG9uZTogJycsCiAgICAgICAgICAgIHRpbWVzdGFtcDogJycsCiAgICAgICAgICAgIGl0ZW1zOiAnJywKICAgICAgICAgICAgbW9kYWw6IGZhbHNlLAogICAgICAgICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgICB9CiAgICB9LAogICAgY29tcG9uZW50czogewogICAgICAgIENhcnQKICAgIH0sCiAgICBjcmVhdGVkKCkgewogICAgICAgIHRoaXMuaXRlbXMgPSB0aGlzLiRzdG9yZS5zdGF0ZS5vcmRlcgogICAgfSwKICAgIGNvbXB1dGVkOiB7CiAgICAgICAgY2FydFRvdGFsKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVycy5jYXJ0VG90YWxQcmljZTsKICAgICAgICB9CiAgICB9LAogICAgd2F0Y2g6IHsKICAgICAgICB1c2VyVWlkKCkgewogICAgICAgICAgICB0aGlzLmluZm8oKTsKICAgICAgICB9CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGFzeW5jIG1ha2VPcmRlcigpIHsKICAgICAgICAgICAgLy8gR2V0IHRoZSB0aW1lCiAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IHRydWUKICAgICAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICBjb25zdCBkYXRlID0gdG9kYXkuZ2V0RnVsbFllYXIoKSsnLScrKHRvZGF5LmdldE1vbnRoKCkrMSkrJy0nK3RvZGF5LmdldERhdGUoKTsKICAgICAgICAgICAgY29uc3QgdGltZSA9IHRvZGF5LmdldEhvdXJzKCkgKyAiOiIgKyB0b2RheS5nZXRNaW51dGVzKCkgKyAiOiIgKyB0b2RheS5nZXRTZWNvbmRzKCk7CiAgICAgICAgICAgIGNvbnN0IGRhdGVUaW1lID0gZGF0ZSArJyAnKyB0aW1lOwogICAgICAgICAgICB0aGlzLnRpbWVzdGFtcCA9IGRhdGVUaW1lOwoKICAgICAgICAgICAgbGV0IHVzZXJJRCA9IHRoaXMudXNlclVpZAogICAgICAgICAgICAKICAgICAgICAgICAgbGV0IHVzZXJJbmZvID0ge25hbWU6IHRoaXMubmFtZSwgYWRkcmVzczogdGhpcy5hZGRyZXNzLCBwaG9uZTogdGhpcy5waG9uZSwgb3JkZXI6IHRoaXMuaXRlbXMsIHRpbWU6IHRoaXMudGltZXN0YW1wLCBhbGxzdW06IHRoaXMuY2FydFRvdGFsfQogICAgICAgICAgICBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgncGxhY2VPcmRlcicsIHt1c2VySW5mbywgdXNlcklEfSkKICAgICAgICAgICAgdGhpcy5tb2RhbCA9IHRydWUKICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UKICAgICAgICB9LAogICAgICAgIGFzeW5jIGluZm8oKSB7CiAgICAgICAgICAgIGxldCByZXMgPSBhd2FpdCBheGlvcy5nZXQoYGh0dHBzOi8vcGl6emEtNWY5MDAuZmlyZWJhc2Vpby5jb20vdXNlcnMvdXNlcl8ke3RoaXMudXNlclVpZH0vdXNlcl9pbmZvLy5qc29uYCkKICAgICAgICAgICAgbGV0IHVzZXIgPSByZXMuZGF0YQogICAgICAgICAgICB0aGlzLm5hbWUgPSB1c2VyLm5hbWUKICAgICAgICAgICAgdGhpcy5hZGRyZXNzID0gdXNlci5hZGRyZXNzCiAgICAgICAgICAgIHRoaXMucGhvbmUgPSB1c2VyLnBob25lCiAgICAgICAgfQogICAgfSwKICAgIG1vdW50ZWQoKSB7CiAgICAgICAgZmIuYXV0aCgpLm9uQXV0aFN0YXRlQ2hhbmdlZCggdXNlciA9PiB7CiAgICAgICAgICAgIGlmICh1c2VyKSB7CiAgICAgICAgICAgICAgICB0aGlzLnVzZXJVaWQgPSB1c2VyLnVpZDsKICAgICAgICAgICAgfQogICAgICAgIH0pCiAgICB9Cn0K"},{"version":3,"sources":["MakeOrder.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MakeOrder.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"h-100 pt-3 pt-md-5\">\n      <h1>Информация за доставка</h1>\n      <div class=\"container h-100\">\n          <img src=\"../assets/delivery.png\" alt=\"\">\n          <div class=\"col-12 col-md-8 mx-auto mt-4\">\n            <input type=\"text\" placeholder=\"Your name\" v-model=\"name\">\n            <input type=\"text\" placeholder=\"Your address\" v-model=\"address\">\n            <input type=\"text\" placeholder=\"Your phone number\" v-model=\"phone\">\n            <button class=\"addToCart-btn mt-3\" @click=\"makeOrder\"><span v-if=\"!loading\">Поръчай</span> <img v-if=\"loading\" src=\"../assets/rolling.gif\" alt=\"rolling\"></button>\n          </div>\n      </div>\n      <Cart ref=\"c\"/>\n      <div v-if=\"modal\" class=\"modal-wrapper\">\n        <div class=\"custom-modal\">\n            <img src=\"../assets/pizza.gif\" alt=\"pizza\">\n            <h2 class=\"mb-0\">Благодарим ти</h2>\n            <br>\n            <h6>Можеш да видиш прогреса на поръчката си</h6>\n            <router-link to=\"/ordertrack\" class=\"addToCart-btn d-flex align-items-center justify-content-center mx-auto btn-modal\">Проследи</router-link>\n        </div>\n      </div>\n  </div>\n</template>\n\n<script>\nimport Cart from '../components/Cart'\nimport { fb } from '../firebase'\nimport axios from 'axios'\n\nexport default {\n    data() {\n        return {\n            userUid: '',\n            name: '',\n            address: '',\n            phone: '',\n            timestamp: '',\n            items: '',\n            modal: false,\n            loading: false,\n        }\n    },\n    components: {\n        Cart\n    },\n    created() {\n        this.items = this.$store.state.order\n    },\n    computed: {\n        cartTotal() {\n            return this.$store.getters.cartTotalPrice;\n        }\n    },\n    watch: {\n        userUid() {\n            this.info();\n        }\n    },\n    methods: {\n        async makeOrder() {\n            // Get the time\n            this.loading = true\n            const today = new Date();\n            const date = today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate();\n            const time = today.getHours() + \":\" + today.getMinutes() + \":\" + today.getSeconds();\n            const dateTime = date +' '+ time;\n            this.timestamp = dateTime;\n\n            let userID = this.userUid\n            \n            let userInfo = {name: this.name, address: this.address, phone: this.phone, order: this.items, time: this.timestamp, allsum: this.cartTotal}\n            await this.$store.dispatch('placeOrder', {userInfo, userID})\n            this.modal = true\n            this.loading = false\n        },\n        async info() {\n            let res = await axios.get(`https://pizza-5f900.firebaseio.com/users/user_${this.userUid}/user_info/.json`)\n            let user = res.data\n            this.name = user.name\n            this.address = user.address\n            this.phone = user.phone\n        }\n    },\n    mounted() {\n        fb.auth().onAuthStateChanged( user => {\n            if (user) {\n                this.userUid = user.uid;\n            }\n        })\n    }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.modal-wrapper {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0,0,0,0.2);\n}\n.custom-modal {\n    width: 40%;\n    background-color: #fff;\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    border-radius: 68px;\n}\nimg {\n    width: 70%;\n    margin-top: 20px;\n}\n@media (min-width: 768px) {\n    img {\n        width: 40%;\n    }\n}\nh1 {\n    font-size: 20px;\n}\n\ninput {\n    width: 100%;\n    margin-bottom: 15px;\n    border: 0;\n    height: 46px;\n    border-radius: 30px;\n    padding: 0 15px;\n    font-size: 14px;\n    box-shadow: 0px 0px 13px 0px rgba(82, 63, 105, 0.05);\n}\n\n.addToCart-btn {\n    margin-bottom: 15px;\n    width: 100%;\n    height: 50px;\n    border: 0;\n    border-radius: 30px;\n    background: #10ca93;\n    color: #fff;\n    box-shadow: 0 6px 8px rgba(0,0,0,0.11); \n    &.btn-modal {\n        margin-top: 20px;\n        margin-bottom: 30px;\n        width: 30%;\n    }\n    img {\n        position: relative;\n        top: -17px;\n        width: 6%;\n    }\n    &:focus {\n        outline: none;\n    }\n}\n\n</style>"]}]}