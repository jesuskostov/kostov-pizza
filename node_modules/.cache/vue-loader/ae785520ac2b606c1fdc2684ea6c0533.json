{"remainingRequest":"/home/jesuskostov/Desktop/project/kostov-pizza/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/jesuskostov/Desktop/project/kostov-pizza/src/views/MakeOrder.vue?vue&type=style&index=0&id=7da84594&lang=scss&scoped=true&","dependencies":[{"path":"/home/jesuskostov/Desktop/project/kostov-pizza/src/views/MakeOrder.vue","mtime":1613994878845},{"path":"/home/jesuskostov/Desktop/project/kostov-pizza/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jesuskostov/Desktop/project/kostov-pizza/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/jesuskostov/Desktop/project/kostov-pizza/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/jesuskostov/Desktop/project/kostov-pizza/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jesuskostov/Desktop/project/kostov-pizza/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jesuskostov/Desktop/project/kostov-pizza/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoubW9kYWwtd3JhcHBlciB7CiAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICB0b3A6IDA7CiAgICBsZWZ0OiAwOwogICAgd2lkdGg6IDEwMCU7CiAgICBoZWlnaHQ6IDEwMCU7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsMCwwLDAuMik7Cn0KLmN1c3RvbS1tb2RhbCB7CiAgICB3aWR0aDogNDAlOwogICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsKICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgIHRvcDogNTAlOwogICAgbGVmdDogNTAlOwogICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7CiAgICBib3JkZXItcmFkaXVzOiA2OHB4Owp9CmltZyB7CiAgICB3aWR0aDogNzAlOwogICAgbWFyZ2luLXRvcDogMjBweDsKfQpAbWVkaWEgKG1pbi13aWR0aDogNzY4cHgpIHsKICAgIGltZyB7CiAgICAgICAgd2lkdGg6IDQwJTsKICAgIH0KfQpoMSB7CiAgICBmb250LXNpemU6IDIwcHg7Cn0KCmlucHV0IHsKICAgIHdpZHRoOiAxMDAlOwogICAgbWFyZ2luLWJvdHRvbTogMTVweDsKICAgIGJvcmRlcjogMDsKICAgIGhlaWdodDogNDZweDsKICAgIGJvcmRlci1yYWRpdXM6IDMwcHg7CiAgICBwYWRkaW5nOiAwIDE1cHg7CiAgICBmb250LXNpemU6IDE0cHg7CiAgICBib3gtc2hhZG93OiAwcHggMHB4IDEzcHggMHB4IHJnYmEoODIsIDYzLCAxMDUsIDAuMDUpOwp9CgouYWRkVG9DYXJ0LWJ0biB7CiAgICBtYXJnaW4tYm90dG9tOiAxNXB4OwogICAgd2lkdGg6IDEwMCU7CiAgICBoZWlnaHQ6IDUwcHg7CiAgICBib3JkZXI6IDA7CiAgICBib3JkZXItcmFkaXVzOiAzMHB4OwogICAgYmFja2dyb3VuZDogIzEwY2E5MzsKICAgIGNvbG9yOiAjZmZmOwogICAgYm94LXNoYWRvdzogMCA2cHggOHB4IHJnYmEoMCwwLDAsMC4xMSk7IAogICAgJi5idG4tbW9kYWwgewogICAgICAgIG1hcmdpbi10b3A6IDIwcHg7CiAgICAgICAgbWFyZ2luLWJvdHRvbTogMzBweDsKICAgICAgICB3aWR0aDogMzAlOwogICAgfQogICAgaW1nIHsKICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAgICAgdG9wOiAtMTdweDsKICAgICAgICB3aWR0aDogNiU7CiAgICB9CiAgICAmOmZvY3VzIHsKICAgICAgICBvdXRsaW5lOiBub25lOwogICAgfQp9Cgo="},{"version":3,"sources":["MakeOrder.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MakeOrder.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"h-100 pt-3 pt-md-5\">\n      <h1>Информация за доставка</h1>\n      <div class=\"container h-100\">\n          <img src=\"../assets/delivery.png\" alt=\"\">\n          <div class=\"col-12 col-md-8 mx-auto mt-4\">\n            <input type=\"text\" placeholder=\"Your name\" v-model=\"name\">\n            <input type=\"text\" placeholder=\"Your address\" v-model=\"address\">\n            <input type=\"text\" placeholder=\"Your phone number\" v-model=\"phone\">\n            <button class=\"addToCart-btn mt-3\" @click=\"makeOrder\"><span v-if=\"!loading\">Поръчай</span> <img v-if=\"loading\" src=\"../assets/rolling.gif\" alt=\"rolling\"></button>\n          </div>\n      </div>\n      <Cart ref=\"c\"/>\n      <div v-if=\"modal\" class=\"modal-wrapper\">\n        <div class=\"custom-modal\">\n            <img src=\"../assets/pizza.gif\" alt=\"pizza\">\n            <h2 class=\"mb-0\">Благодарим ти</h2>\n            <br>\n            <h6>Можеш да видиш прогреса на поръчката си</h6>\n            <router-link to=\"/ordertrack\" class=\"addToCart-btn d-flex align-items-center justify-content-center mx-auto btn-modal\">Проследи</router-link>\n        </div>\n      </div>\n  </div>\n</template>\n\n<script>\nimport Cart from '../components/Cart'\nimport { fb } from '../firebase'\nimport axios from 'axios'\n\nexport default {\n    data() {\n        return {\n            userUid: '',\n            name: '',\n            address: '',\n            phone: '',\n            timestamp: '',\n            items: '',\n            modal: false,\n            loading: false,\n        }\n    },\n    components: {\n        Cart\n    },\n    created() {\n        this.items = this.$store.state.order\n    },\n    computed: {\n        cartTotal() {\n            return this.$store.getters.cartTotalPrice;\n        }\n    },\n    watch: {\n        userUid() {\n            this.info();\n        }\n    },\n    methods: {\n        async makeOrder() {\n            // Get the time\n            this.loading = true\n            const today = new Date();\n            const date = today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate();\n            const time = today.getHours() + \":\" + today.getMinutes() + \":\" + today.getSeconds();\n            const dateTime = date +' '+ time;\n            this.timestamp = dateTime;\n\n            let userID = this.userUid\n            \n            let userInfo = {name: this.name, address: this.address, phone: this.phone, order: this.items, time: this.timestamp, allsum: this.cartTotal}\n            await this.$store.dispatch('placeOrder', {userInfo, userID})\n            this.modal = true\n            this.loading = false\n        },\n        async info() {\n            let res = await axios.get(`https://pizza-5f900.firebaseio.com/users/user_${this.userUid}.json`)\n            let user = res.data\n            this.name = user.name\n            this.address = user.address\n            this.phone = user.phone\n        }\n    },\n    mounted() {\n        fb.auth().onAuthStateChanged( user => {\n            if (user) {\n                this.userUid = user.uid;\n            }\n        })\n    }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.modal-wrapper {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0,0,0,0.2);\n}\n.custom-modal {\n    width: 40%;\n    background-color: #fff;\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    border-radius: 68px;\n}\nimg {\n    width: 70%;\n    margin-top: 20px;\n}\n@media (min-width: 768px) {\n    img {\n        width: 40%;\n    }\n}\nh1 {\n    font-size: 20px;\n}\n\ninput {\n    width: 100%;\n    margin-bottom: 15px;\n    border: 0;\n    height: 46px;\n    border-radius: 30px;\n    padding: 0 15px;\n    font-size: 14px;\n    box-shadow: 0px 0px 13px 0px rgba(82, 63, 105, 0.05);\n}\n\n.addToCart-btn {\n    margin-bottom: 15px;\n    width: 100%;\n    height: 50px;\n    border: 0;\n    border-radius: 30px;\n    background: #10ca93;\n    color: #fff;\n    box-shadow: 0 6px 8px rgba(0,0,0,0.11); \n    &.btn-modal {\n        margin-top: 20px;\n        margin-bottom: 30px;\n        width: 30%;\n    }\n    img {\n        position: relative;\n        top: -17px;\n        width: 6%;\n    }\n    &:focus {\n        outline: none;\n    }\n}\n\n</style>"]}]}