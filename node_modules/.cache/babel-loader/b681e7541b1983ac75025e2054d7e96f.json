{"remainingRequest":"/home/jesuskostov/Desktop/project/Pizza/node_modules/babel-loader/lib/index.js!/home/jesuskostov/Desktop/project/Pizza/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/jesuskostov/Desktop/project/Pizza/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/jesuskostov/Desktop/project/Pizza/src/views/MakeOrder.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/jesuskostov/Desktop/project/Pizza/src/views/MakeOrder.vue","mtime":1613994878845},{"path":"/home/jesuskostov/Desktop/project/Pizza/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jesuskostov/Desktop/project/Pizza/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/jesuskostov/Desktop/project/Pizza/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jesuskostov/Desktop/project/Pizza/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL2plc3Vza29zdG92L0Rlc2t0b3AvcHJvamVjdC9QaXp6YS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBDYXJ0IGZyb20gJy4uL2NvbXBvbmVudHMvQ2FydCc7CmltcG9ydCB7IGZiIH0gZnJvbSAnLi4vZmlyZWJhc2UnOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXJVaWQ6ICcnLAogICAgICBuYW1lOiAnJywKICAgICAgYWRkcmVzczogJycsCiAgICAgIHBob25lOiAnJywKICAgICAgdGltZXN0YW1wOiAnJywKICAgICAgaXRlbXM6ICcnLAogICAgICBtb2RhbDogZmFsc2UsCiAgICAgIGxvYWRpbmc6IGZhbHNlCiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgQ2FydDogQ2FydAogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuaXRlbXMgPSB0aGlzLiRzdG9yZS5zdGF0ZS5vcmRlcjsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBjYXJ0VG90YWw6IGZ1bmN0aW9uIGNhcnRUb3RhbCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnMuY2FydFRvdGFsUHJpY2U7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgdXNlclVpZDogZnVuY3Rpb24gdXNlclVpZCgpIHsKICAgICAgdGhpcy5pbmZvKCk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBtYWtlT3JkZXI6IGZ1bmN0aW9uIG1ha2VPcmRlcigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHRvZGF5LCBkYXRlLCB0aW1lLCBkYXRlVGltZSwgdXNlcklELCB1c2VySW5mbzsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAvLyBHZXQgdGhlIHRpbWUKICAgICAgICAgICAgICAgIF90aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgdG9kYXkgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICAgICAgZGF0ZSA9IHRvZGF5LmdldEZ1bGxZZWFyKCkgKyAnLScgKyAodG9kYXkuZ2V0TW9udGgoKSArIDEpICsgJy0nICsgdG9kYXkuZ2V0RGF0ZSgpOwogICAgICAgICAgICAgICAgdGltZSA9IHRvZGF5LmdldEhvdXJzKCkgKyAiOiIgKyB0b2RheS5nZXRNaW51dGVzKCkgKyAiOiIgKyB0b2RheS5nZXRTZWNvbmRzKCk7CiAgICAgICAgICAgICAgICBkYXRlVGltZSA9IGRhdGUgKyAnICcgKyB0aW1lOwogICAgICAgICAgICAgICAgX3RoaXMudGltZXN0YW1wID0gZGF0ZVRpbWU7CiAgICAgICAgICAgICAgICB1c2VySUQgPSBfdGhpcy51c2VyVWlkOwogICAgICAgICAgICAgICAgdXNlckluZm8gPSB7CiAgICAgICAgICAgICAgICAgIG5hbWU6IF90aGlzLm5hbWUsCiAgICAgICAgICAgICAgICAgIGFkZHJlc3M6IF90aGlzLmFkZHJlc3MsCiAgICAgICAgICAgICAgICAgIHBob25lOiBfdGhpcy5waG9uZSwKICAgICAgICAgICAgICAgICAgb3JkZXI6IF90aGlzLml0ZW1zLAogICAgICAgICAgICAgICAgICB0aW1lOiBfdGhpcy50aW1lc3RhbXAsCiAgICAgICAgICAgICAgICAgIGFsbHN1bTogX3RoaXMuY2FydFRvdGFsCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLiRzdG9yZS5kaXNwYXRjaCgncGxhY2VPcmRlcicsIHsKICAgICAgICAgICAgICAgICAgdXNlckluZm86IHVzZXJJbmZvLAogICAgICAgICAgICAgICAgICB1c2VySUQ6IHVzZXJJRAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBfdGhpcy5tb2RhbCA9IHRydWU7CiAgICAgICAgICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgaW5mbzogZnVuY3Rpb24gaW5mbygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgcmVzLCB1c2VyOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MuZ2V0KCJodHRwczovL3BpenphLTVmOTAwLmZpcmViYXNlaW8uY29tL3VzZXJzL3VzZXJfIi5jb25jYXQoX3RoaXMyLnVzZXJVaWQsICIuanNvbiIpKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICB1c2VyID0gcmVzLmRhdGE7CiAgICAgICAgICAgICAgICBfdGhpczIubmFtZSA9IHVzZXIubmFtZTsKICAgICAgICAgICAgICAgIF90aGlzMi5hZGRyZXNzID0gdXNlci5hZGRyZXNzOwogICAgICAgICAgICAgICAgX3RoaXMyLnBob25lID0gdXNlci5waG9uZTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgZmIuYXV0aCgpLm9uQXV0aFN0YXRlQ2hhbmdlZChmdW5jdGlvbiAodXNlcikgewogICAgICBpZiAodXNlcikgewogICAgICAgIF90aGlzMy51c2VyVWlkID0gdXNlci51aWQ7CiAgICAgIH0KICAgIH0pOwogIH0KfTs="},{"version":3,"sources":["MakeOrder.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"h-100 pt-3 pt-md-5\">\n      <h1>Информация за доставка</h1>\n      <div class=\"container h-100\">\n          <img src=\"../assets/delivery.png\" alt=\"\">\n          <div class=\"col-12 col-md-8 mx-auto mt-4\">\n            <input type=\"text\" placeholder=\"Your name\" v-model=\"name\">\n            <input type=\"text\" placeholder=\"Your address\" v-model=\"address\">\n            <input type=\"text\" placeholder=\"Your phone number\" v-model=\"phone\">\n            <button class=\"addToCart-btn mt-3\" @click=\"makeOrder\"><span v-if=\"!loading\">Поръчай</span> <img v-if=\"loading\" src=\"../assets/rolling.gif\" alt=\"rolling\"></button>\n          </div>\n      </div>\n      <Cart ref=\"c\"/>\n      <div v-if=\"modal\" class=\"modal-wrapper\">\n        <div class=\"custom-modal\">\n            <img src=\"../assets/pizza.gif\" alt=\"pizza\">\n            <h2 class=\"mb-0\">Благодарим ти</h2>\n            <br>\n            <h6>Можеш да видиш прогреса на поръчката си</h6>\n            <router-link to=\"/ordertrack\" class=\"addToCart-btn d-flex align-items-center justify-content-center mx-auto btn-modal\">Проследи</router-link>\n        </div>\n      </div>\n  </div>\n</template>\n\n<script>\nimport Cart from '../components/Cart'\nimport { fb } from '../firebase'\nimport axios from 'axios'\n\nexport default {\n    data() {\n        return {\n            userUid: '',\n            name: '',\n            address: '',\n            phone: '',\n            timestamp: '',\n            items: '',\n            modal: false,\n            loading: false,\n        }\n    },\n    components: {\n        Cart\n    },\n    created() {\n        this.items = this.$store.state.order\n    },\n    computed: {\n        cartTotal() {\n            return this.$store.getters.cartTotalPrice;\n        }\n    },\n    watch: {\n        userUid() {\n            this.info();\n        }\n    },\n    methods: {\n        async makeOrder() {\n            // Get the time\n            this.loading = true\n            const today = new Date();\n            const date = today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate();\n            const time = today.getHours() + \":\" + today.getMinutes() + \":\" + today.getSeconds();\n            const dateTime = date +' '+ time;\n            this.timestamp = dateTime;\n\n            let userID = this.userUid\n            \n            let userInfo = {name: this.name, address: this.address, phone: this.phone, order: this.items, time: this.timestamp, allsum: this.cartTotal}\n            await this.$store.dispatch('placeOrder', {userInfo, userID})\n            this.modal = true\n            this.loading = false\n        },\n        async info() {\n            let res = await axios.get(`https://pizza-5f900.firebaseio.com/users/user_${this.userUid}.json`)\n            let user = res.data\n            this.name = user.name\n            this.address = user.address\n            this.phone = user.phone\n        }\n    },\n    mounted() {\n        fb.auth().onAuthStateChanged( user => {\n            if (user) {\n                this.userUid = user.uid;\n            }\n        })\n    }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.modal-wrapper {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0,0,0,0.2);\n}\n.custom-modal {\n    width: 40%;\n    background-color: #fff;\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    border-radius: 68px;\n}\nimg {\n    width: 70%;\n    margin-top: 20px;\n}\n@media (min-width: 768px) {\n    img {\n        width: 40%;\n    }\n}\nh1 {\n    font-size: 20px;\n}\n\ninput {\n    width: 100%;\n    margin-bottom: 15px;\n    border: 0;\n    height: 46px;\n    border-radius: 30px;\n    padding: 0 15px;\n    font-size: 14px;\n    box-shadow: 0px 0px 13px 0px rgba(82, 63, 105, 0.05);\n}\n\n.addToCart-btn {\n    margin-bottom: 15px;\n    width: 100%;\n    height: 50px;\n    border: 0;\n    border-radius: 30px;\n    background: #10ca93;\n    color: #fff;\n    box-shadow: 0 6px 8px rgba(0,0,0,0.11); \n    &.btn-modal {\n        margin-top: 20px;\n        margin-bottom: 30px;\n        width: 30%;\n    }\n    img {\n        position: relative;\n        top: -17px;\n        width: 6%;\n    }\n    &:focus {\n        outline: none;\n    }\n}\n\n</style>"],"sourceRoot":"src/views"}]}